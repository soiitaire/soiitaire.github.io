---
layout: post
title: 吉他 fm 上线
tag: startup
---
我平时玩吉他的时候，在网上搜谱子都觉得不是很方便，无论是搜索还是阅读都不是特别好的体验。
因为热爱，产生了去颠覆这个互联网领域，因此 [jita.fm][1] 孕育而生。
代码直接使用了 [ruby-china][2]，除了部署上卡住了两天没有什么难度，具体的内容可能要单独开一篇来讲述过程了。
*啊，MIT 协议就是好。*
我做的吉他谱网站，逼格必须搞起，IE9一下的兼容情况没有考虑，虽然前端框架使用的是 [Bootstrap][3] 2.*的版本，
[Github](https://github.com) 上可以直接找到 IE6 的补丁，
但国产开源代码的CSS实在不好调，所以对不住了各位，请使用现代浏览器。前端的配色调整过一次，整体采用的简单风格，
主体颜色加在一起才9种，后调整颜色的时候，顺手把源码的[Bootstrap][3] 2.0版本换成了 2.3.2，
毕竟好多 class 在那个上古时期并没有支持。

```css
$black:                 #404040 !default;
$grayDarker:            #565656 !default;
$grayDark:              #666666 !default;
$gray:                  #999999 !default;
$grayLight:             #f2f2f2 !default;
$grayLighter:           #e5e5e5 !default;
$grayLightest:          #fafafa !default;
$white:                 #ffffff !default;
$red:                   #E25740 !default;
```

[ruby-china][2] 的不好之处还有一点是他使用的 google 来做的的站内搜索，对墙内的玩吉他的普通电脑使用者非常不友好，
被我直接替换成了[elasticsearch][4]。
然后在中文分词搜索的坑中踩了两天，增加这个功能后，又觉得效果不是特别的好。
如果搜索的词语中不包含设置的字典里的词的话，是没有办法搜索到结果的，
这意味着我必须把数据库中所有的文字全部分词后存入到字典中。其实仔细想起来站内搜索的话，
用户输入的文字不会特别多，大多数应该是歌名和作者名，不会直接搜一整句话，搞中文分词完全没有必要。
**又是一次在没有想好产品的情况下就冒然开始动手写的例子啊。**
[elasticsearch][4]的内存占用是个很大的坑，基本上 service 一启动就会占到1G，
内存不够仍去导入数据的话，进程就直接宕了，搜索的页面总报404就是这个原因。服务器是2个G的内存，
[puma](https://github.com/puma/puma)开了4个进程，每个进程6个线程，
加上的用作缓存的[memcache](http://memcached.org/)，
用作队列处理的[redis](http://redis.io/)和数据库。
内存占用情况很成问题，不知道[ruby-china][2]的服务器的内存是怎么优化的。

通过观察几家比较大的网站，我还发现在吉他谱上做社区也是一个错误的，未经大脑思考就跟风做了社区。
大部分这类的社区的内容都是代码靠抓去别人家的内容（包括我们），用户主动上传的可能性非常小。
绝大部分都是伸手党，根本构建不成一个社区。下图是来自[谱夹子](http://www.pujiazi.com/)站长的愤怒。

![](http://localhost:4000/images/jitafm-pujiazi.png)

如何做一个对用户友好的吉他谱平台，我还在思考中，总之现有的社区模式我认为完全不对。

项目做到一半，发现另外一家比较新潮的吉他社区网站[彼岸吉他](http://byguitar.com)，
居然还有在线打开GTP文件的功能，帅爆了。翻了翻他们的 js 代码，众多minified的变量中，
[alphatab][5]的变量名格外抢眼，搜一下果然是开源的解析 GTP 格式的软件，而且直接附加了 js。
**That's easier.** 这周就搞起。

悄悄上线一周，每天的pv少的可怜，开始想的推广策略是去微博上看看有谁在找谱，我帮他找了贴到站上然后发链接给他。
本以为会带几个核心种子用户进来，但增加了那一点点流量以外，没有什么效果。
在我仍不知如何推广的时候发现在百度指数里，吉他相关的第一关键词是[虫虫吉他谱](http://ccjt.net)，
从网上找了点这个网站的资料来看，如果不是软广的话，创始人是非常辛苦的，内容大部分都是原创的，
而搜索引擎对原创内容是友好的，所以即使差不多是国内广告最多的吉他谱社区，口碑依旧好，使用者依旧很多。

目前我人手有限，能力又够自己去扒谱子，原创性基本为0。考虑到找吉他谱的需求大多数都是去搜索引擎直接搜，
刚起步的网站流量也基本上只是从搜索引擎过来的。所以接下来的工作中心就是继续做好SEO了。

[1]: http://jita.fm
[2]: https://github.com/ruby-china/ruby-china
[3]: http://getbootstrap.com/2.3.2
[4]: http://www.elasticsearch.org
[5]: http://www.alphatab.net/
